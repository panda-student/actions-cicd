# 通用Docker Compose配置模板
# 支持多环境部署，通过环境变量文件配置

services:
  ${SERVICE_PREFIX}:
    # 容器基础配置
    image: ${IMAGE_NAME}:${IMAGE_TAG}
    restart: unless-stopped
    
    # 健康检查配置
    healthcheck:
      test: ${HEALTHCHECK_COMMAND}
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    
    # 端口映射
    ports:
      - "${PORT_MAPPING}"
    
    # 环境变量（根据项目类型自动适配）
    environment:
      - NODE_ENV=${NODE_ENV}
      - ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT}
      - PYTHON_ENV=${PYTHON_ENV}
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
